@inject IJSRuntime JSRuntime
@inject WellSvg WellSvg;

<g id="@($"Item{DataContext.RectangleId}")">

    <rect style="fill:rgb(@DataContext.R,@DataContext.G,@DataContext.B);cursor:@pointer;"
          @onmousemove="MouseMove"
          @onmousedown="MouseDown"
          @onmouseup="MouseUp"
          @onmouseout="MouseOut"
          width="@DataContext.Width." height="@DataContext.Height"
          x="@DataContext.X" y="@DataContext.Y" />

    <text style="pointer-events: none; -webkit-user-select: none;
-moz-user-select: none; -ms-user-select: none;  user-select: none;"
          x="@(DataContext.X + 4)" y="@(DataContext.Y + 20)" fill="black">@DataContext.Position</text>

        @*<rect
                  @onmousemove="MouseMove"
                  @onmousedown="MouseDown"
                  @onmouseup="MouseUp"
                  @onmouseout="MouseOut"
                  x="@DataContext.X" y="@DataContext.Y">
            </rect>

            <text style="pointer-events: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;  user-select: none;"
                  x="@(DataContext.X + 4)" y="@(DataContext.Y + 20)" fill="black">@DataContext.Position</text>*@

    </g>

@code {

    [Parameter] public Action<string> ChangeSelected { get; set; }

    [Parameter] public LogSvg DataContext { get; set; }

    [Parameter] public string pointer { get; set; } = "pointer";

    public void MouseDown(MouseEventArgs e)
    {
        if (WellSvg.SelectedItem == -1)
        {
            DataContext.OriginalX = (int)e.ClientX - DataContext.X - WellSvg.ContainerX;
            DataContext.OriginalY = (int)e.ClientY - DataContext.Y - WellSvg.ContainerY;

            WellSvg.SelectedItem = DataContext.RectangleId;
            ChangeSelected?.Invoke($"Item{DataContext.RectangleId}");
        }
    }

    public void MouseUp(MouseEventArgs args)
    {
        if (WellSvg.SelectedItem == DataContext.RectangleId)
        {
            WellSvg.SelectedItem = -1;
        }
    }

    public void MouseOut(MouseEventArgs e)
    {
        WellSvg.OverChild = false;
    }

    public void MouseMove(MouseEventArgs e)
    {
        WellSvg.OverChild = true;
    }
}
